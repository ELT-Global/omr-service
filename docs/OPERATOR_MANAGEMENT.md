# How to Create a New API Account

Before you can use the OMR API, you need to create an account (called an "operator"). This gives you a unique token to authenticate your requests.

## What You Need

Each account has three things:

1. **User ID** - Automatically generated by the system
2. **UUID (Your Token)** - Your secret key for API access
3. **Webhook URL** - Where we send notifications when jobs finish

## Creating an Account

### Step 1: Access Your Server

If the API is on your computer:
```bash
cd /path/to/omr-service
```

If it's on a remote server, SSH in first:
```bash
ssh user@your-server.com
cd /path/to/omr-service
```

### Step 2: Create Your Account

Run this command with your webhook URL:

```bash
python manage_operators.py create https://your-app.com/webhook
```

You'll see something like this:

```
======================================================================
âœ“ Operator created successfully!
======================================================================
Operator ID:    550e8400-e29b-41d4-a716-446655440000
UUID (Token):   7c9e6679-7425-40de-944b-e07fc1f90ae7
Webhook URL:    https://your-app.com/webhook
======================================================================

ðŸ”‘ Use this token for authentication:
   Authorization: Basic 7c9e6679-7425-40de-944b-e07fc1f90ae7
```

**Important:** Save your UUID token somewhere safe! You'll need it to use the API.

### Step 3: Test Your Account

Try making an API request with your new token:

```bash
curl -u "api:YOUR-UUID-HERE" \
  -X POST "http://your-domain.com/omr:parse-sheet" \
  -F "userId=student_001" \
  -F "image=@sheet.jpg"
```

Replace `YOUR-UUID-HERE` with the UUID from Step 2.

## Other Useful Commands

### See All Accounts

```bash
python manage_operators.py list
```

### Update Webhook URL

```bash
python manage_operators.py update YOUR-UUID https://new-webhook.com
```

### Delete an Account

```bash
python manage_operators.py delete YOUR-UUID
```

## Using Your Account

Once created, use your UUID token in every API request:

**Python:**
```python
import requests

response = requests.post(
    "http://your-domain.com/omr:parse-sheet",
    auth=("api", "YOUR-UUID-HERE"),
    files={"image": open("sheet.jpg", "rb")},
    data={"userId": "student_001"}
)
```

**cURL:**
```bash
curl -u "api:YOUR-UUID-HERE" \
  -X POST "http://your-domain.com/omr:parse-sheet" \
  -F "userId=student_001" \
  -F "image=@sheet.jpg"
```

## Tips

- **Keep your token secret** - Don't share it or commit it to GitHub
- **Use environment variables** - Store your token as `OMR_TOKEN=your-uuid`
- **One account per app** - Create separate accounts for each application
- **HTTPS webhooks only** - Use secure URLs for webhooks (https://)

## Need Help?

- Can't find the command? Make sure you're in the project directory
- Getting errors? Check that Python is installed: `python --version`
- Token not working? Verify it exists: `python manage_operators.py list`
